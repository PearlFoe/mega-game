{% extends 'base.html' %}

{% load static %}

{% block styles %}
	<link rel="stylesheet"
		href="{% static 'articles/all_articles.css' %}">
{% endblock %}

{% block javascript %}
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script>
	function on_subm(){
		$.ajax({
			data: $('form').serialize(),
			type: "POST",
			url: "{% url 'create_new_article_url' event.id %}",
			success: function (response) {},
			error: function (response) {
				alert("Что-то пошло не так(");
				console.log(response.responseJSON.errors)
			}
		});
		return false;
	}
  </script>
{% endblock javascript %}

{% block content %}
	<div class="articles">
		{% for article in articles %}
			<div class="card border-dark mb-3">
				<div class="card-body">
					<h5 class="card-title">{{ article.title }}</h5>
					{% if article.description %}
						<p class="card-text">{{ article.description }}</p>
					{% endif %}
				</div>
				<div class="card-footer text-white bg-dark bg-opacity-75">
					<p class="card-text"><b>{{ article.created_by }}</b></p>
				</div>
			</div>
		{% endfor %}
	</div>
	<div class="article-form bg-dark">
		<form method="post">
			{% csrf_token %}
			{{ form }}
			<input type="submit" value="Submit" onclick="return on_subm();">
		</form>
	</div>
{% endblock %}
